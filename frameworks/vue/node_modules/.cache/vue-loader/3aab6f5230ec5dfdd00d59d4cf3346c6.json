{"remainingRequest":"/Users/jeroen/Documents/_work/innouveau/projects/clients/024-klaas-nienhuis/024-bartenbach/dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeroen/Documents/_work/innouveau/projects/clients/024-klaas-nienhuis/024-bartenbach/dev/src/components/pages/presentation/directions/direction.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeroen/Documents/_work/innouveau/projects/clients/024-klaas-nienhuis/024-bartenbach/dev/src/components/pages/presentation/directions/direction.vue","mtime":1611221243984},{"path":"/Users/jeroen/Documents/_work/innouveau/projects/clients/024-klaas-nienhuis/024-bartenbach/dev/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jeroen/Documents/_work/innouveau/projects/clients/024-klaas-nienhuis/024-bartenbach/dev/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBEaXJlY3Rpb24gZnJvbSAnQC9jbGFzc2VzL0RpcmVjdGlvbic7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnZGlyZWN0aW9uJywKICAgIGNvbXBvbmVudHM6IHt9LAogICAgcHJvcHM6IHsKICAgICAgICBkaXJlY3Rpb246IHsKICAgICAgICAgICAgdHlwZTogRGlyZWN0aW9uLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHJpZ2h0OiAwLAogICAgICAgICAgICBib3R0b206IDAKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBpc29Db2RlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubGFuZ3VhZ2VzLmN1cnJlbnQuaXNvX2NvZGU7CiAgICAgICAgfSwKICAgICAgICB0aXRsZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uLnRpdGxlW3RoaXMuaXNvQ29kZV0KICAgICAgICB9LAogICAgICAgIGRlc2NyaXB0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24uZGVzY3JpcHRpb25bdGhpcy5pc29Db2RlXQogICAgICAgIH0sCiAgICAgICAgY3VycmVudEluZGV4KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZGlyZWN0aW9ucy5hbGwuaW5kZXhPZih0aGlzLmRpcmVjdGlvbik7CiAgICAgICAgfSwKICAgICAgICBsYXN0SXRlbSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEluZGV4ID09PSB0aGlzLiRzdG9yZS5zdGF0ZS5kaXJlY3Rpb25zLmFsbC5sZW5ndGggLSAxOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgbWVhc3VyZSgpIHsKICAgICAgICAgICAgbGV0IGVsZW1lbnQsIGJiLCBtYXJnaW5SaWdodCwgbWFyZ2luVG9wOwogICAgICAgICAgICBtYXJnaW5SaWdodCA9IC02NTsKICAgICAgICAgICAgbWFyZ2luVG9wID0gNDg7CiAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRpcmVjdGlvbi5lbGVtZW50KTsKICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIGJiID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbi5wb3NpdGlvbiA9PT0gJ2xlZnQnKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gd2lkdGggb2YgZGlyZWN0aW9uID0gMzUwLCBzZWUgY3NzIGluIHRoaXMgZmlsZQogICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHQgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIGJiLmxlZnQgLSBtYXJnaW5SaWdodDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJvdHRvbSA9IHdpbmRvdy5pbm5lckhlaWdodCAtIGJiLnRvcCAtIGJiLmhlaWdodCArIG1hcmdpblRvcDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gcG9zaXRpb24gPSAndG9wJwogICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHQgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIGJiLmxlZnQgLSAoMC41ICogYmIud2lkdGgpICsgbWFyZ2luUmlnaHQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBiYi50b3AgKyBtYXJnaW5Ub3A7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbGVtZW50ICcgKyB0aGlzLmRpcmVjdGlvbi5lbGVtZW50ICsgJyBub3QgZm91bmQsIGNoZWNrIHByb3BlcnR5ICJlbGVtZW50IiBpbiBkaXJlY3Rpb25zLmpzJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbmV4dERpcmVjdGlvbigpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uLmFjdGlvbikgewogICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24uYWN0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gd2FpdCBhIGNhbGxzdGFjaywgdGhlIGFjdGlvbiBtaWdodCBuZWVkIHJlbmRlcmluZwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmxhc3RJdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndWkvdXBkYXRlUHJvcGVydHknLCB7a2V5OiAncG9wdXBOYXZpZ2F0aW9uJywgdmFsdWU6IHRydWV9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkaXJlY3Rpb25zL3NldEN1cnJlbnQnLCB0aGlzLiRzdG9yZS5zdGF0ZS5kaXJlY3Rpb25zLmFsbFt0aGlzLmN1cnJlbnRJbmRleCArIDFdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGNsb3NlKCkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RpcmVjdGlvbnMvc2V0Q3VycmVudCcsIG51bGwpOwogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCl7CiAgICAgICAgdGhpcy5tZWFzdXJlKCk7CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICBkaXJlY3Rpb246IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5tZWFzdXJlKCk7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["direction.vue"],"names":[],"mappings":";AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"direction.vue","sourceRoot":"src/components/pages/presentation/directions","sourcesContent":["<script>\n    import Direction from '@/classes/Direction';\n\n    export default {\n        name: 'direction',\n        components: {},\n        props: {\n            direction: {\n                type: Direction,\n                required: true\n            }\n        },\n        data() {\n            return {\n                right: 0,\n                bottom: 0\n            }\n        },\n        computed: {\n            isoCode() {\n                return this.$store.state.languages.current.iso_code;\n            },\n            title() {\n                return this.direction.title[this.isoCode]\n            },\n            description() {\n                return this.direction.description[this.isoCode]\n            },\n            currentIndex() {\n                return this.$store.state.directions.all.indexOf(this.direction);\n            },\n            lastItem() {\n                return this.currentIndex === this.$store.state.directions.all.length - 1;\n            }\n        },\n        methods: {\n            measure() {\n                let element, bb, marginRight, marginTop;\n                marginRight = -65;\n                marginTop = 48;\n                element = document.getElementById(this.direction.element);\n                if (element) {\n                    bb = element.getBoundingClientRect();\n                    if (this.direction.position === 'left') {\n                        // width of direction = 350, see css in this file\n                        this.right = window.innerWidth - bb.left - marginRight;\n                        this.bottom = window.innerHeight - bb.top - bb.height + marginTop;\n                    } else {\n                        // position = 'top'\n                        this.right = window.innerWidth - bb.left - (0.5 * bb.width) + marginRight;\n                        this.bottom = window.innerHeight - bb.top + marginTop;\n                    }\n                } else {\n                    console.error('Element ' + this.direction.element + ' not found, check property \"element\" in directions.js')\n                }\n            },\n            nextDirection() {\n                if (this.direction.action) {\n                    this.direction.action();\n                }\n                // wait a callstack, the action might need rendering\n                setTimeout(() => {\n                    if (this.lastItem) {\n                        this.close();\n                        this.$store.commit('ui/updateProperty', {key: 'popupNavigation', value: true});\n                    } else {\n                        this.$store.commit('directions/setCurrent', this.$store.state.directions.all[this.currentIndex + 1]);\n                    }\n                })\n            },\n            close() {\n                this.$store.commit('directions/setCurrent', null);\n            }\n        },\n        mounted(){\n            this.measure();\n        },\n        watch: {\n            direction: function () {\n                this.measure();\n            }\n        }\n    }\n</script>\n\n\n<template>\n    <div\n        :style=\"{'right': right + 'px', 'bottom': bottom + 'px'}\"\n        :class=\"{\n            'direction--left': direction.position === 'left'\n        }\"\n        class=\"direction\">\n        <div class=\"direction__title\">\n            {{title}}\n            <div\n                @click=\"close()\"\n                class=\"close-button\"></div>\n        </div>\n        <div class=\"direction__description\">\n            {{description}}\n        </div>\n        <div class=\"direction__footer\">\n            <div\n                @click=\"nextDirection()\"\n                class=\"button\">\n                {{translate('continue', true)}}\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<style lang=\"scss\">\n    @import '@/styles/variables.scss';\n\n    .direction {\n        position: absolute;\n        z-index: 10;\n        background: $white-transparent;\n        padding: $standard-padding-x2;\n        border-radius: 48px;\n        width: 350px;\n\n        .direction__title {\n            color: $blue-1;\n            font-weight: 700;\n            font-size: 24px;\n            margin-bottom: 20px;\n            position: relative;\n\n            .close-button {\n                right: 0;\n                top: 0;\n            }\n        }\n\n        .direction__description {\n            font-size: 16px;\n            margin-bottom: $standard-padding-x2;\n        }\n\n        .direction__footer {\n            display: flex;\n            justify-content: center;\n        }\n\n        &:after {\n            content: '';\n            width: 0;\n            height: 0;\n            border-width: 32px 20px 0 20px;\n            border-color: $white-transparent transparent transparent transparent;\n            border-style: solid;\n            position: absolute;\n            right: 48px;\n            top: 100%;\n        }\n\n        &.direction--left {\n            //transform: translateY(50%);\n\n            &:after {\n                content: '';\n                width: 0;\n                height: 0;\n                border-width: 20px 0 20px 32px;\n                border-color: transparent transparent transparent $white-transparent;\n                border-style: solid;\n                position: absolute;\n                right: auto;\n                left: 100%;\n                top: calc(100% - 82px);\n            }\n        }\n    }\n</style>"]}]}